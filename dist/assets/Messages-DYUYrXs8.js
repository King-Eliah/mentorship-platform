import{c as D,u as M,r as i,z as I,j as e,d as f,S as O,I as p,U as v,v as c}from"./index-CLTl5StW.js";import{P as L}from"./phone-kmcciXWB.js";import{M as z}from"./more-vertical-C-4gc2Ct.js";import{S as R}from"./send-Dm2XI3rG.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=D("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),E=()=>{const{user:d}=M(),[w,h]=i.useState([]),[s,o]=i.useState(null),[l,u]=i.useState(""),[m,N]=i.useState(""),[S,k]=i.useState(!0),C=[{id:"1",name:"Sarah Johnson",role:"Mentor",isOnline:!0,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah"},{id:"2",name:"John Doe",role:"Mentee",isOnline:!1,lastSeen:"2 hours ago",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=John"},{id:"3",name:"Admin User",role:"Admin",isOnline:!0,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin"}],x=[{id:"1",senderId:"1",content:"Hi! How are you progressing with the React project?",timestamp:new Date(Date.now()-36e5).toISOString(),isRead:!0},{id:"2",senderId:d?.id||"3",content:"Hello! I'm making good progress. I've completed the component structure and working on state management now.",timestamp:new Date(Date.now()-3e6).toISOString(),isRead:!0},{id:"3",senderId:"1",content:"That's great! Let me know if you need help with Redux or Context API.",timestamp:new Date(Date.now()-18e5).toISOString(),isRead:!0}];i.useEffect(()=>{(()=>{const r=C.map(a=>({id:`conv-${a.id}`,contactId:a.id,contact:a,messages:a.id==="1"?x:[],lastMessage:a.id==="1"?x[x.length-1]:void 0,unreadCount:a.id==="1"?0:Math.floor(Math.random()*3)}));h(r),o(r[0]),k(!1)})()},[d?.id]);const b=i.useCallback(()=>{if(!l.trim()||!s)return;const t={id:Date.now().toString(),senderId:d?.id||"current-user",content:l.trim(),timestamp:new Date().toISOString(),isRead:!1},r={...s,messages:[...s.messages,t],lastMessage:t};h(a=>a.map(n=>n.id===s.id?r:n)),o(r),u(""),I.success("Message sent!")},[l,s,d?.id]),y=t=>new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),g=t=>{const r=new Date(t),a=new Date,n=new Date(a);return n.setDate(n.getDate()-1),r.toDateString()===a.toDateString()?"Today":r.toDateString()===n.toDateString()?"Yesterday":r.toLocaleDateString("en-US",{month:"short",day:"numeric"})},j=w.filter(t=>t.contact.name.toLowerCase().includes(m.toLowerCase())||t.contact.role.toLowerCase().includes(m.toLowerCase()));return S?e.jsx("div",{className:"flex h-[calc(100vh-4rem)] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading messages..."})]})}):e.jsxs("div",{className:"flex h-[calc(100vh-4rem)] bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(p,{placeholder:"Search conversations...",value:m,onChange:t=>N(t.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"}):j.map(t=>e.jsx("div",{onClick:()=>o(t),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${s?.id===t.id?"bg-blue-50 dark:bg-blue-900/20 border-r-2 border-r-blue-500":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[t.contact.avatar?e.jsx("img",{src:t.contact.avatar,alt:t.contact.name,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-gray-500"})}),t.contact.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.contact.name}),t.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:y(t.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t.lastMessage?.content||"No messages yet"}),t.unreadCount>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5 min-w-[1.25rem] text-center",children:t.unreadCount})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.contact.role," • ",t.contact.isOnline?"Online":t.contact.lastSeen]})]})]})},t.id))})]}),s?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[s.contact.avatar?e.jsx("img",{src:s.contact.avatar,alt:s.contact.name,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-gray-500"})}),s.contact.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:s.contact.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.contact.role," • ",s.contact.isOnline?"Online":s.contact.lastSeen]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.messages.map((t,r)=>{const a=t.senderId===d?.id,n=r===0||g(t.timestamp)!==g(s.messages[r-1].timestamp);return e.jsxs("div",{children:[n&&e.jsx("div",{className:"text-center text-xs text-gray-500 my-4",children:g(t.timestamp)}),e.jsx("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsx("p",{className:"text-sm",children:t.content}),e.jsx("p",{className:`text-xs mt-1 ${a?"text-blue-100":"text-gray-500"}`,children:y(t.timestamp)})]})})]},t.id)})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{placeholder:"Type a message...",value:l,onChange:t=>u(t.target.value),onKeyPress:t=>t.key==="Enter"&&b(),className:"flex-1"}),e.jsx(c,{onClick:b,disabled:!l.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white",children:e.jsx(R,{className:"w-4 h-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-500",children:"Choose a conversation from the sidebar to start messaging"})]})})]})};export{E as default};
