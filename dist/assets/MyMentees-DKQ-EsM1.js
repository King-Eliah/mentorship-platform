import{c as F,u as B,h as H,r as i,R as W,f as w,E as p,G as c,j as e,b as E,s as M,w as C,T as u,C as j,v as f,d as S,k as Y,n as q,g as z}from"./index-DmCLvhFB.js";import{L as V,C as K}from"./Skeleton-9vD4stKU.js";import{M as Q}from"./Modal-BQ2qUe9G.js";import{e as G}from"./eventService-Deh23tCq.js";import{g as D}from"./goalService-D7n5aCIU.js";import{A as L}from"./award-DBCBiK4Z.js";import{T as X}from"./trending-up-DxBI5PHy.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=F("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ie=()=>{const{user:o}=B(),O=H(),[m,T]=i.useState([]),[A,N]=i.useState(!0),[t,y]=i.useState(null),[P,x]=i.useState(!1),[b,k]=i.useState(!1);i.useEffect(()=>{R()},[o]);const R=async()=>{if(o?.role===W.MENTOR)try{if(N(!0),(await w.getGroups()).find(l=>l.mentorId===o.id)){const n=(await w.getUsers()).filter(r=>r.role==="MENTEE"&&r.isActive),g=await Promise.all(n.map(async r=>{const h=await U(r.id);return{...r,stats:h}}));T(g)}}catch(s){console.error("Failed to fetch mentees:",s)}finally{N(!1)}},U=async s=>{try{const a=await G.getJoinedEvents(),l=a.length,n=new Date,g=a.filter(d=>{const _=new Date(d.scheduledAt);return d.status===p.SCHEDULED&&_>=n}).length,r=await D.getGoals(s),h=r.filter(d=>d.status!==c.COMPLETED).length,$=r.filter(d=>d.status===c.COMPLETED).length,I=JSON.parse(localStorage.getItem(`shared_resources_${s}`)||"[]").length;return{activeGoals:h,completedGoals:$,eventsJoined:l,upcomingEvents:g,resourcesAccessed:I}}catch(a){return console.error("Failed to fetch mentee stats:",a),{activeGoals:0,completedGoals:0,eventsJoined:0,upcomingEvents:0,resourcesAccessed:0}}},v=s=>{O("/messages",{state:{recipientId:s}})},J=async s=>{y(s),x(!0),k(!0);try{const[a,l]=await Promise.all([D.getGoals(s.id),G.getJoinedEvents()]);y(n=>n?{...n,goals:a||[],events:l||[]}:null)}catch(a){console.error("Failed to fetch mentee details:",a)}finally{k(!1)}};return A?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Mentees"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Overview of all your assigned mentees and their progress"})]})}),e.jsx(V,{items:3,itemComponent:K})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Mentees"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Overview of all your assigned mentees and their progress"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(E,{className:"w-4 h-4 inline mr-1"}),m.length," Total Mentees"]})]}),m.length===0?e.jsx(M,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(E,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Mentees Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have any assigned mentees at the moment."})]})}):e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsx("div",{className:"cursor-pointer",onClick:()=>J(s),children:e.jsx(M,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold",children:[s.firstName?.[0],s.lastName?.[0]]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"text-center px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg min-w-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[e.jsx(u,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:"Goals"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:s.stats.activeGoals})]}),e.jsxs("div",{className:"text-center px-3 py-2 bg-green-50 dark:bg-green-900/20 rounded-lg min-w-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[e.jsx(L,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"Done"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:s.stats.completedGoals})]}),e.jsxs("div",{className:"text-center px-3 py-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg min-w-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[e.jsx(j,{className:"w-3 h-3 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Events"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:s.stats.eventsJoined})]}),e.jsxs("div",{className:"text-center px-3 py-2 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg min-w-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[e.jsx(X,{className:"w-3 h-3 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Progress"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[s.stats.completedGoals>0?Math.round(s.stats.completedGoals/(s.stats.activeGoals+s.stats.completedGoals)*100):0,"%"]})]})]}),e.jsx("div",{className:"flex gap-2 flex-shrink-0",onClick:a=>a.stopPropagation(),children:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>v(s.id),className:"px-3 py-1.5",children:[e.jsx(S,{className:"w-3.5 h-3.5 mr-1.5"}),"Message"]})})]})})})},s.id))}),t&&e.jsx(Q,{isOpen:P,onClose:()=>x(!1),title:`${t.firstName} ${t.lastName} - Details`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold",children:[t.firstName?.[0],t.lastName?.[0]]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-center",children:[e.jsx(u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.stats.activeGoals}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active Goals"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 text-center",children:[e.jsx(L,{className:"w-5 h-5 text-green-600 dark:text-green-400 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.stats.completedGoals}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Completed"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3 text-center",children:[e.jsx(j,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.stats.eventsJoined}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Events"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 text-center",children:[e.jsx(Y,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.stats.resourcesAccessed}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Resources"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Goals (",t.goals?.length||0,")"]}),b?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):t.goals&&t.goals.length>0?e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.goals.map(s=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.status===c.COMPLETED?e.jsx(q,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):e.jsx(Z,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.title})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 ml-6 line-clamp-2",children:s.description})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full flex-shrink-0 ${s.status===c.COMPLETED?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":s.status===c.IN_PROGRESS?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:s.status.replace("_"," ")})]}),e.jsx("div",{className:"mt-2 ml-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 dark:bg-blue-500 rounded-full transition-all",style:{width:`${s.progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",children:[s.progress,"%"]})]})})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No goals yet"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Events Attended (",t.events?.length||0,")"]}),b?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})}):t.events&&t.events.length>0?e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.events.slice(0,5).map(s=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),new Date(s.scheduledAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full flex-shrink-0 ${s.status===p.COMPLETED?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":s.status===p.SCHEDULED?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:s.status})]})},s.id))}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No events attended yet"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(f,{onClick:()=>{v(t.id),x(!1)},className:"flex-1",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Send Message"]}),e.jsx(f,{variant:"outline",onClick:()=>x(!1),children:"Close"})]})]})})]})};export{ie as MyMentees};
