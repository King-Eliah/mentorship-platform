import{L as le,N as Z,O as S,P as Q,Q as G,V as _,W as H,Y as X,Z as me,_ as F,$ as xe,a0 as ge,a1 as ee,a2 as q,a3 as te,a4 as fe,r as u,a5 as oe,a6 as W,j as e,I as P,X as ce,b as L,v,z as b,e as V,A as U,u as pe,R as M,s as $,t as z,w as B,d as ye,C as be,f as ve}from"./index-wzYYnU-P.js";import{A as je,c as Ne,a as we,b as ke,D as Ce}from"./DetailsModal-Ckis0hci.js";import{M as de,C as Se}from"./Modal-BFeH5Rjt.js";import{S as he,R as Me}from"./Select-DzPzvVj9.js";import{P as K}from"./plus-_tGHlXwb.js";import{S as se}from"./save-ViXkPC0O.js";import"./square-pen-C0XozYBw.js";import"./phone-Bgq4I3zK.js";import"./x-circle-D2a7sJqN.js";import"./user-check-DpqbgYBT.js";var Re=class extends le{constructor(t,s){super(),this.options=s,this.#s=t,this.#l=null,this.#n=Z(),this.bindMethods(),this.setOptions(s)}#s;#e=void 0;#r=void 0;#t=void 0;#a;#i;#n;#l;#g;#u;#m;#c;#d;#o;#x=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),re(this.#e,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return J(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return J(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#e.removeObserver(this)}setOptions(t){const s=this.options,l=this.#e;if(this.options=this.#s.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),s._defaulted&&!Q(this.options,s)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&ae(this.#e,l,this.options,s)&&this.#h(),this.updateResult(),n&&(this.#e!==l||S(this.options.enabled,this.#e)!==S(s.enabled,this.#e)||G(this.options.staleTime,this.#e)!==G(s.staleTime,this.#e))&&this.#f();const a=this.#p();n&&(this.#e!==l||S(this.options.enabled,this.#e)!==S(s.enabled,this.#e)||a!==this.#o)&&this.#y(a)}getOptimisticResult(t){const s=this.#s.getQueryCache().build(this.#s,t),l=this.createResult(s,t);return Oe(this,l)&&(this.#t=l,this.#i=this.options,this.#a=this.#e.state),l}getCurrentResult(){return this.#t}trackResult(t,s){return new Proxy(t,{get:(l,n)=>(this.trackProp(n),s?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(l,n))})}trackProp(t){this.#x.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#s.defaultQueryOptions(t),l=this.#s.getQueryCache().build(this.#s,s);return l.fetch().then(()=>this.createResult(l,s))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#h(t){this.#N();let s=this.#e.fetch(this.options,t);return t?.throwOnError||(s=s.catch(_)),s}#f(){this.#v();const t=G(this.options.staleTime,this.#e);if(H||this.#t.isStale||!X(t))return;const l=me(this.#t.dataUpdatedAt,t)+1;this.#c=F.setTimeout(()=>{this.#t.isStale||this.updateResult()},l)}#p(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(t){this.#j(),this.#o=t,!(H||S(this.options.enabled,this.#e)===!1||!X(this.#o)||this.#o===0)&&(this.#d=F.setInterval(()=>{(this.options.refetchIntervalInBackground||xe.isFocused())&&this.#h()},this.#o))}#b(){this.#f(),this.#y(this.#p())}#v(){this.#c&&(F.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(F.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const l=this.#e,n=this.options,a=this.#t,m=this.#a,i=this.#i,d=t!==l?t.state:this.#r,{state:p}=t;let h={...p},w=!1,c;if(s._optimisticResults){const r=this.hasListeners(),x=!r&&re(t,s),T=r&&ae(t,l,s,n);(x||T)&&(h={...h,...ge(p.data,t.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:C,status:f}=h;c=h.data;let j=!1;if(s.placeholderData!==void 0&&c===void 0&&f==="pending"){let r;a?.isPlaceholderData&&s.placeholderData===i?.placeholderData?(r=a.data,j=!0):r=typeof s.placeholderData=="function"?s.placeholderData(this.#m?.state.data,this.#m):s.placeholderData,r!==void 0&&(f="success",c=ee(a?.data,r,s),w=!0)}if(s.select&&c!==void 0&&!j)if(a&&c===m?.data&&s.select===this.#g)c=this.#u;else try{this.#g=s.select,c=s.select(c),c=ee(a?.data,c,s),this.#u=c,this.#l=null}catch(r){this.#l=r}this.#l&&(k=this.#l,c=this.#u,C=Date.now(),f="error");const o=h.fetchStatus==="fetching",y=f==="pending",R=f==="error",E=y&&o,O=c!==void 0,N={status:f,fetchStatus:h.fetchStatus,isPending:y,isSuccess:f==="success",isError:R,isInitialLoading:E,isLoading:E,data:c,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:C,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:o,isRefetching:o&&!y,isLoadingError:R&&!O,isPaused:h.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:R&&O,isStale:Y(t,s),refetch:this.refetch,promise:this.#n,isEnabled:S(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const r=A=>{N.status==="error"?A.reject(N.error):N.data!==void 0&&A.resolve(N.data)},x=()=>{const A=this.#n=N.promise=Z();r(A)},T=this.#n;switch(T.status){case"pending":t.queryHash===l.queryHash&&r(T);break;case"fulfilled":(N.status==="error"||N.data!==T.value)&&x();break;case"rejected":(N.status!=="error"||N.error!==T.reason)&&x();break}}return N}updateResult(){const t=this.#t,s=this.createResult(this.#e,this.options);if(this.#a=this.#e.state,this.#i=this.options,this.#a.data!==void 0&&(this.#m=this.#e),Q(s,t))return;this.#t=s;const l=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#x.size)return!0;const m=new Set(a??this.#x);return this.options.throwOnError&&m.add("error"),Object.keys(this.#t).some(i=>{const g=i;return this.#t[g]!==t[g]&&m.has(g)})};this.#w({listeners:l()})}#N(){const t=this.#s.getQueryCache().build(this.#s,this.options);if(t===this.#e)return;const s=this.#e;this.#e=t,this.#r=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#w(t){q.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Ee(t,s){return S(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function re(t,s){return Ee(t,s)||t.state.data!==void 0&&J(t,s,s.refetchOnMount)}function J(t,s,l){if(S(s.enabled,t)!==!1&&G(s.staleTime,t)!=="static"){const n=typeof l=="function"?l(t):l;return n==="always"||n!==!1&&Y(t,s)}return!1}function ae(t,s,l,n){return(t!==s||S(n.enabled,t)===!1)&&(!l.suspense||t.state.status!=="error")&&Y(t,l)}function Y(t,s){return S(s.enabled,t)!==!1&&t.isStaleByTime(G(s.staleTime,t))}function Oe(t,s){return!Q(t.getCurrentResult(),s)}var Te=class extends le{#s;#e=void 0;#r;#t;constructor(t,s){super(),this.#s=t,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.#s.defaultMutationOptions(t),Q(this.options,s)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),s?.mutationKey&&this.options.mutationKey&&te(s.mutationKey)!==te(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(t,s){return this.#t=s,this.#r?.removeObserver(this),this.#r=this.#s.getMutationCache().build(this.#s,this.options),this.#r.addObserver(this),this.#r.execute(t)}#a(){const t=this.#r?.state??fe();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){q.batch(()=>{if(this.#t&&this.hasListeners()){const s=this.#e.variables,l=this.#e.context,n={client:this.#s,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#t.onSuccess?.(t.data,s,l,n),this.#t.onSettled?.(t.data,null,s,l,n)):t?.type==="error"&&(this.#t.onError?.(t.error,s,l,n),this.#t.onSettled?.(void 0,t.error,s,l,n))}this.listeners.forEach(s=>{s(this.#e)})})}},ue=u.createContext(!1),Pe=()=>u.useContext(ue);ue.Provider;function Ie(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var De=u.createContext(Ie()),Ge=()=>u.useContext(De),Ae=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Fe=t=>{u.useEffect(()=>{t.clearReset()},[t])},Ue=({result:t,errorResetBoundary:s,throwOnError:l,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||oe(l,[t.error,n])),Qe=t=>{if(t.suspense){const l=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>l(n(...a)):l(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},_e=(t,s)=>t.isLoading&&t.isFetching&&!s,Le=(t,s)=>t?.suspense&&s.isPending,ie=(t,s,l)=>s.fetchOptimistic(t).catch(()=>{l.clearReset()});function Ke(t,s,l){const n=Pe(),a=Ge(),m=W(),i=m.defaultQueryOptions(t);m.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=n?"isRestoring":"optimistic",Qe(i),Ae(i,a),Fe(a);const g=!m.getQueryCache().get(i.queryHash),[d]=u.useState(()=>new s(m,i)),p=d.getOptimisticResult(i),h=!n&&t.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(w=>{const c=h?d.subscribe(q.batchCalls(w)):_;return d.updateResult(),c},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),u.useEffect(()=>{d.setOptions(i)},[i,d]),Le(i,p))throw ie(i,d,a);if(Ue({result:p,errorResetBoundary:a,throwOnError:i.throwOnError,query:m.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw p.error;return m.getDefaultOptions().queries?._experimental_afterQuery?.(i,p),i.experimental_prefetchInRender&&!H&&_e(p,n)&&(g?ie(i,d,a):m.getQueryCache().get(i.queryHash)?.promise)?.catch(_).finally(()=>{d.updateResult()}),i.notifyOnChangeProps?p:d.trackResult(p)}function ne(t,s){return Ke(t,Re)}function D(t,s){const l=W(),[n]=u.useState(()=>new Te(l,t));u.useEffect(()=>{n.setOptions(t)},[n,t]);const a=u.useSyncExternalStore(u.useCallback(i=>n.subscribe(q.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),m=u.useCallback((i,g)=>{n.mutate(i,g).catch(_)},[n]);if(a.error&&oe(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:m,mutateAsync:a.mutate}}const qe=({isOpen:t,onClose:s,onSubmit:l,availableUsers:n=[]})=>{const[a,m]=u.useState({name:"",description:"",maxMembers:10,isPrivate:!1,category:"general",memberIds:[]}),[i,g]=u.useState([]),[d,p]=u.useState(""),[h,w]=u.useState(!1),c=n.filter(o=>`${o.firstName} ${o.lastName}`.toLowerCase().includes(d.toLowerCase())||o.email.toLowerCase().includes(d.toLowerCase())),k=async o=>{if(o.preventDefault(),!a.name.trim()){b.error("Group name is required");return}if(a.maxMembers<2){b.error("Group must allow at least 2 members");return}w(!0);try{await l({...a,memberIds:i.map(y=>y.id)}),C(),b.success("Group created successfully!")}catch(y){console.error("Error creating group:",y),b.error("Failed to create group. Please try again.")}finally{w(!1)}},C=()=>{m({name:"",description:"",maxMembers:10,isPrivate:!1,category:"general",memberIds:[]}),g([]),p(""),s()},f=o=>{i.find(y=>y.id===o.id)||g([...i,o])},j=o=>{g(i.filter(y=>y.id!==o))};return e.jsx(de,{isOpen:t,onClose:C,title:"Create New Group",maxWidth:"lg",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name *"}),e.jsx(P,{value:a.name,onChange:o=>m({...a,name:o.target.value}),placeholder:"Enter group name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx(he,{value:a.category,onChange:o=>m({...a,category:o.target.value}),options:[{value:"general",label:"General"},{value:"technical",label:"Technical"},{value:"career",label:"Career Development"},{value:"project",label:"Project-based"},{value:"study",label:"Study Group"}]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:o=>m({...a,description:o.target.value}),placeholder:"Describe the group's purpose and goals...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Members"}),e.jsx(P,{type:"number",min:"2",max:"100",value:a.maxMembers,onChange:o=>m({...a,maxMembers:parseInt(o.target.value)})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isPrivate",checked:a.isPrivate,onChange:o=>m({...a,isPrivate:o.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isPrivate",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Private Group"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Add Members (",i.length,"/",a.maxMembers-1,")"]}),e.jsx("div",{className:"mb-3",children:e.jsx(P,{type:"search",placeholder:"Search users by name or email...",value:d,onChange:o=>p(o.target.value),className:"mb-2"})}),i.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Selected Members:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(o=>e.jsxs("div",{className:"flex items-center bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm",children:[e.jsxs("span",{children:[o.firstName," ",o.lastName]}),e.jsx("button",{type:"button",onClick:()=>j(o.id),className:"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:e.jsx(ce,{className:"h-3 w-3"})})]},o.id))})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md",children:c.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No users found"}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map(o=>e.jsx("div",{className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>f(o),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:[o.firstName.charAt(0),o.lastName.charAt(0)]}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[o.firstName," ",o.lastName]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o.email," • ",o.role]})]})]}),i.find(y=>y.id===o.id)?e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:e.jsx(L,{className:"h-4 w-4"})}):e.jsx(v,{type:"button",size:"sm",variant:"ghost",onClick:y=>{y.stopPropagation(),f(o)},disabled:i.length>=a.maxMembers-1,children:e.jsx(K,{className:"h-3 w-3"})})]})},o.id))})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(v,{type:"button",variant:"outline",onClick:C,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:h,children:h?"Creating...":"Create Group"})]})]})})},$e=({isOpen:t,onClose:s,onSave:l,onDelete:n,group:a,availableUsers:m=[]})=>{const[i,g]=u.useState({name:"",description:"",maxMembers:10,isPrivate:!1,category:"general",memberIds:[]}),[d,p]=u.useState([]),[h,w]=u.useState(""),[c,k]=u.useState(!1),[C,f]=u.useState(!1),[j,o]=u.useState("general");u.useEffect(()=>{a&&t&&(g({name:a.name,description:a.description||"",maxMembers:a.maxMembers,isPrivate:a.isPrivate,category:a.category,memberIds:a.members.map(r=>r.id)}),p(a.members))},[a,t]);const y=m.filter(r=>!d.find(x=>x.id===r.id)&&(`${r.firstName} ${r.lastName}`.toLowerCase().includes(h.toLowerCase())||r.email.toLowerCase().includes(h.toLowerCase()))),R=async r=>{if(r.preventDefault(),!i.name.trim()){b.error("Group name is required");return}if(i.maxMembers<d.length){b.error(`Max members cannot be less than current member count (${d.length})`);return}k(!0);try{await l({...i,memberIds:d.map(x=>x.id)}),b.success("Group settings updated successfully!"),s()}catch(x){console.error("Error updating group:",x),b.error("Failed to update group settings. Please try again.")}finally{k(!1)}},E=async()=>{k(!0);try{await n(),b.success("Group deleted successfully!"),s()}catch(r){console.error("Error deleting group:",r),b.error("Failed to delete group. Please try again.")}finally{k(!1),f(!1)}},O=r=>{d.length<i.maxMembers?p([...d,r]):b.error("Maximum member limit reached")},I=r=>{if(r===a.mentorId){b.error("Cannot remove group creator");return}p(d.filter(x=>x.id!==r))},N=[{id:"general",label:"General",icon:V},{id:"members",label:"Members",icon:L},{id:"danger",label:"Danger Zone",icon:U}];return e.jsxs(de,{isOpen:t,onClose:s,title:"Group Settings",maxWidth:"2xl",children:[e.jsxs("div",{className:"flex h-96",children:[e.jsx("div",{className:"w-48 border-r border-gray-200 dark:border-gray-700 pr-4",children:e.jsx("nav",{className:"space-y-1",children:N.map(r=>{const x=r.icon;return e.jsxs("button",{onClick:()=>o(r.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${j===r.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),r.label]},r.id)})})}),e.jsx("div",{className:"flex-1 pl-6",children:e.jsxs("form",{onSubmit:R,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[j==="general"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"General Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),e.jsx(P,{value:i.name,onChange:r=>g({...i,name:r.target.value}),placeholder:"Enter group name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx(he,{value:i.category,onChange:r=>g({...i,category:r.target.value}),options:[{value:"general",label:"General"},{value:"technical",label:"Technical"},{value:"career",label:"Career Development"},{value:"project",label:"Project-based"},{value:"study",label:"Study Group"}]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:r=>g({...i,description:r.target.value}),placeholder:"Describe the group's purpose and goals...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Members"}),e.jsx(P,{type:"number",min:d.length,max:"100",value:i.maxMembers,onChange:r=>g({...i,maxMembers:parseInt(r.target.value)})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isPrivate",checked:i.isPrivate,onChange:r=>g({...i,isPrivate:r.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isPrivate",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Private Group"})]})]})]}),j==="members"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Manage Members (",d.length,"/",i.maxMembers,")"]})}),e.jsx("div",{children:e.jsx(P,{type:"search",placeholder:"Search users to add...",value:h,onChange:r=>w(r.target.value)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Members"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:[r.firstName.charAt(0),r.lastName.charAt(0)]}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.firstName," ",r.lastName,r.id===a.mentorId&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"Creator"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.email})]})]}),r.id!==a.mentorId&&e.jsx("button",{type:"button",onClick:()=>I(r.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:e.jsx(ce,{className:"h-4 w-4"})})]},r.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add Members"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md",children:y.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:h?"No users found":"All available users are already members"}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:y.map(r=>e.jsx("div",{className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>O(r),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:[r.firstName.charAt(0),r.lastName.charAt(0)]}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.firstName," ",r.lastName]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.email," • ",r.role]})]})]}),e.jsx(K,{className:"h-4 w-4 text-gray-400"})]})},r.id))})})]})]}),j==="danger"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Danger Zone"}),e.jsx("div",{className:"border border-red-200 dark:border-red-800 rounded-lg p-4 bg-red-50 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(U,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Group"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Once you delete a group, there is no going back. All messages, files, and member associations will be permanently deleted."}),e.jsx("div",{className:"mt-3",children:e.jsxs(v,{type:"button",variant:"outline",onClick:()=>f(!0),className:"border-red-300 text-red-700 hover:bg-red-50 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-900/30",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Delete Group"]})})]})]})})]})]}),j!=="danger"&&e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(v,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]}),C&&e.jsx("div",{className:"fixed inset-0 z-60 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 text-left shadow-xl transition-all w-full max-w-md",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30",children:e.jsx(U,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"mt-0 ml-4 text-left",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Delete Group"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone.']})})]})]})}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700 flex justify-end space-x-3",children:[e.jsx(v,{variant:"outline",onClick:()=>f(!1),disabled:c,children:"Cancel"}),e.jsx("button",{onClick:E,disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Deleting...":"Delete Group"})]})]})]})})]})},tt=()=>{const{user:t}=pe(),s=W(),[l,n]=u.useState(!1),[a,m]=u.useState(!1),[i,g]=u.useState(!1),[d,p]=u.useState(!1),[h,w]=u.useState(null),{data:c,isLoading:k}=ne({queryKey:["my-group"],queryFn:async()=>{try{return await ve.getGroups().then(r=>r[0]||null)}catch{return null}}}),{data:C=[]}=ne({queryKey:["available-users"],queryFn:async()=>[{id:"1",firstName:"John",lastName:"Doe",email:"john@example.com",role:M.MENTEE,isActive:!0},{id:"2",firstName:"Jane",lastName:"Smith",email:"jane@example.com",role:M.MENTEE,isActive:!0},{id:"3",firstName:"Mike",lastName:"Johnson",email:"mike@example.com",role:M.MENTEE,isActive:!0}]}),f=c?.members??[],j=D({mutationFn:async r=>(console.log("Joining group:",r),await new Promise(x=>setTimeout(x,500)),{success:!0}),onSuccess:()=>s.invalidateQueries({queryKey:["my-group"]})}),o=D({mutationFn:async r=>(console.log("Leaving group:",r),await new Promise(x=>setTimeout(x,500)),{success:!0}),onSuccess:()=>s.invalidateQueries({queryKey:["my-group"]})}),y=D({mutationFn:async r=>(console.log("Creating group:",r),await new Promise(x=>setTimeout(x,1e3)),{id:"new-group-id",...r}),onSuccess:()=>{s.invalidateQueries({queryKey:["my-group"]}),n(!1),b.success("Group created successfully!")},onError:()=>{b.error("Failed to create group")}}),R=D({mutationFn:async r=>(console.log("Updating group:",r),await new Promise(x=>setTimeout(x,1e3)),{...c,...r}),onSuccess:()=>{s.invalidateQueries({queryKey:["my-group"]}),m(!1),b.success("Group updated successfully!")},onError:()=>{b.error("Failed to update group")}}),E=D({mutationFn:async()=>{console.log("Deleting group:",c?.id),await new Promise(r=>setTimeout(r,1e3))},onSuccess:()=>{s.invalidateQueries({queryKey:["my-group"]}),m(!1),p(!1),b.success("Group deleted successfully!")},onError:()=>{b.error("Failed to delete group")}}),O=r=>{w(r),g(!0)},I=r=>{b.success("Edit member functionality coming soon")},N=r=>{b.success(`Remove ${r.firstName} ${r.lastName} from group`)};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Me,{className:"h-6 w-6 animate-spin text-gray-400"})}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c.description})]}),e.jsxs("div",{className:"flex gap-2",children:[t?.role===M.MENTOR&&e.jsxs(v,{variant:"secondary",onClick:()=>m(!0),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Manage Group"]}),t&&c&&!f.some(r=>r.id===t.id)&&e.jsx(v,{onClick:()=>j.mutate(c.id),disabled:j.isPending,children:j.isPending?"Joining...":"Join Group"}),t&&c&&f.some(r=>r.id===t.id)&&e.jsx(v,{onClick:()=>o.mutate(c.id),variant:"outline",disabled:o.isPending,children:o.isPending?"Leaving...":"Leave Group"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Group Members (",f.length,"/",c.maxMembers??10,")"]})}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.map(r=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>O(r),children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:[r.firstName.charAt(0),r.lastName.charAt(0)]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[r.firstName," ",r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.role}),r.skills&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:r.skills})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${r.isActive?"bg-green-500":"bg-gray-400"}`}),e.jsx("div",{onClick:x=>x.stopPropagation(),children:e.jsx(je,{actions:[Ne(()=>O(r)),...t?.role===M.MENTOR&&r.id!==t.id?[we(()=>I()),ke(()=>N(r))]:[]],size:"sm"})})]},r.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(z,{children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(v,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Group Chat"]}),e.jsxs(v,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Schedule Event"]}),e.jsxs(v,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"View All Members"]}),t?.role===M.MENTOR&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Add Member"]}),e.jsxs(v,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Group Settings"]})]})]})]}),e.jsxs($,{children:[e.jsx(z,{children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Group Statistics"})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Members"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.filter(r=>r.isActive).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Messages"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"247"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Events Held"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"12"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Avg. Response Time"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"2.3 hrs"})]})]})]})]})]}),e.jsx(qe,{isOpen:l,onClose:()=>n(!1),onSubmit:y.mutateAsync,availableUsers:C}),c&&e.jsx($e,{isOpen:a,onClose:()=>m(!1),onSave:R.mutateAsync,onDelete:E.mutateAsync,group:{id:c.id,name:c.name,description:c.description||"",members:f,category:"general",isPrivate:!1,maxMembers:10,mentorId:c.mentorId||t?.id||""},availableUsers:C}),h&&e.jsx(Ce,{isOpen:i,onClose:()=>{g(!1),w(null)},data:h,type:"user",onEdit:()=>I()}),e.jsx(Se,{isOpen:d,onClose:()=>p(!1),onConfirm:E.mutateAsync,title:"Delete Group",message:`Are you sure you want to delete "${c?.name}"? This action cannot be undone.`,confirmText:"Delete Group",variant:"danger"})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Group Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:t?.role===M.MENTOR?"You haven't created a mentoring group yet.":"You haven't been assigned to a mentoring group yet."}),t?.role===M.MENTOR&&e.jsxs(v,{onClick:()=>n(!0),className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})};export{tt as MyGroup};
