import{c as B,h as ne,a as ie,r as o,j as e,aj as oe,S as ce,g as de,H as xe,K as ge,B as H,i as l,l as f,d as v,k as h,C as P}from"./index-wzYYnU-P.js";import{A as he,D as me}from"./DetailsModal-Ckis0hci.js";import{C as ue}from"./Modal-BFeH5Rjt.js";import{u as ye}from"./useAuth-gQqF4tG9.js";import{a as V}from"./activityService-_2MUYeV7.js";import{F as pe}from"./filter-Ck_dJCXY.js";import{A as g}from"./award-Bky5W3bt.js";import{T as E}from"./trending-up-OeDVYuSp.js";import"./square-pen-C0XozYBw.js";import"./phone-Bgq4I3zK.js";import"./x-circle-D2a7sJqN.js";import"./user-check-DpqbgYBT.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=B("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=B("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),be=({type:N,className:a="w-4 h-4"})=>({[l.GOAL_CREATED]:e.jsx(E,{className:a}),[l.GOAL_COMPLETED]:e.jsx(g,{className:a}),[l.GOAL_UPDATED]:e.jsx(E,{className:a}),[l.GOAL_MILESTONE_COMPLETED]:e.jsx(g,{className:a}),[l.SKILL_ADDED]:e.jsx(h,{className:a}),[l.SKILL_LEVEL_UPDATED]:e.jsx(E,{className:a}),[l.SKILL_ENDORSED]:e.jsx(g,{className:a}),[l.SKILL_ASSESSED]:e.jsx(h,{className:a}),[l.LEARNING_ACTIVITY_CREATED]:e.jsx(h,{className:a}),[l.LEARNING_ACTIVITY_STARTED]:e.jsx(h,{className:a}),[l.LEARNING_ACTIVITY_COMPLETED]:e.jsx(g,{className:a}),[l.LEARNING_PROGRESS]:e.jsx(E,{className:a}),[l.LEARNING_COMPLETED]:e.jsx(g,{className:a}),[l.EVENT_ATTENDED]:e.jsx(P,{className:a}),[l.EVENT_CREATED]:e.jsx(P,{className:a}),[l.RESOURCE_ACCESSED]:e.jsx(h,{className:a}),[l.RESOURCE_UPLOADED]:e.jsx(h,{className:a}),[l.RESOURCE_SHARED]:e.jsx(v,{className:a}),[l.MENTORING_SESSION_COMPLETED]:e.jsx(v,{className:a}),[l.GROUP_JOINED]:e.jsx(f,{className:a}),[l.GROUP_CREATED]:e.jsx(f,{className:a}),[l.FEEDBACK_RECEIVED]:e.jsx(v,{className:a}),[l.FEEDBACK_GIVEN]:e.jsx(v,{className:a}),[l.PROFILE_UPDATED]:e.jsx(f,{className:a}),[l.CONNECTION_MADE]:e.jsx(f,{className:a}),[l.ACHIEVEMENT_EARNED]:e.jsx(g,{className:a}),[l.ACHIEVEMENT_UNLOCKED]:e.jsx(g,{className:a}),[l.CERTIFICATION_EARNED]:e.jsx(g,{className:a})})[N]||e.jsx(H,{className:a}),Ie=()=>{const N=ne(),{user:a}=ye(),{isDark:s}=ie(),[m,w]=o.useState([]),[S,L]=o.useState(!0),[u,I]=o.useState({}),[p,Y]=o.useState(""),[A,O]=o.useState(!1),[T,W]=o.useState("date"),[d,$]=o.useState("desc"),[b,R]=o.useState("all"),[k,M]=o.useState(!1),[_,F]=o.useState(null),[G,D]=o.useState(!1),[y,C]=o.useState(null);o.useEffect(()=>{q()},[a?.id,u,p,T,d,b]);const q=async()=>{try{L(!0);const t=new Date;let r;switch(b){case"today":r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();break;case"week":r=new Date(t.getTime()-10080*60*1e3).toISOString();break;case"month":r=new Date(t.getFullYear(),t.getMonth()-1,t.getDate()).toISOString();break;case"year":r=new Date(t.getFullYear()-1,t.getMonth(),t.getDate()).toISOString();break;default:r=void 0}const n=await V.getRecentActivities(50,{...u,search:p||void 0,dateFrom:r}),i=J(n);w(i)}catch(t){console.error("Failed to load activities:",t),w([])}finally{L(!1)}},J=t=>[...t].sort((r,n)=>{let i=0;switch(T){case"date":i=new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime();break;case"type":i=r.type.localeCompare(n.type);break;case"engagement":const c=x=>x.type.includes("COMPLETED")||x.type.includes("EARNED")?3:x.type.includes("CREATED")||x.type.includes("STARTED")?2:1;i=c(r)-c(n);break;default:i=new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime()}return d==="asc"?i:-i}),z=t=>{F(t),M(!0)},Q=t=>{C(t),D(!0)},X=async()=>{if(y)try{await V.deleteActivity(y.id),w(t=>t.filter(r=>r.id!==y.id)),D(!1),C(null)}catch(t){console.error("Failed to delete activity:",t)}},Z=t=>{const r=new Date,n=new Date(t),i=Math.floor((r.getTime()-n.getTime())/1e3);return i<60?"Just now":i<3600?`${Math.floor(i/60)}m ago`:i<86400?`${Math.floor(i/3600)}h ago`:i<604800?`${Math.floor(i/86400)}d ago`:n.toLocaleDateString()},ee=t=>t.includes("GOAL")?"text-blue-500":t.includes("SKILL")||t.includes("LEARNING")?"text-green-500":t.includes("EVENT")?"text-purple-500":t.includes("MESSAGE")||t.includes("FEEDBACK")?"text-orange-500":t.includes("ACHIEVEMENT")||t.includes("AWARD")?"text-yellow-500":"text-gray-500",te=()=>{const t={total:m.length,byCategory:{goals:0,learning:0,social:0,achievements:0},engagementLevel:{high:0,medium:0,low:0}};return m.forEach(r=>{r.type.includes("GOAL")?t.byCategory.goals++:r.type.includes("SKILL")||r.type.includes("LEARNING")?t.byCategory.learning++:r.type.includes("GROUP")||r.type.includes("FEEDBACK")||r.type.includes("CONNECTION")?t.byCategory.social++:(r.type.includes("ACHIEVEMENT")||r.type.includes("CERTIFICATION"))&&t.byCategory.achievements++,r.type.includes("COMPLETED")||r.type.includes("EARNED")?t.engagementLevel.high++:r.type.includes("CREATED")||r.type.includes("STARTED")?t.engagementLevel.medium++:t.engagementLevel.low++}),t},se=()=>e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:`animate-pulse border ${s?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${s?"bg-gray-700":"bg-gray-200"} rounded-full`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`h-4 ${s?"bg-gray-700":"bg-gray-200"} rounded w-3/4 mb-2`}),e.jsx("div",{className:`h-3 ${s?"bg-gray-700":"bg-gray-200"} rounded w-1/2`})]}),e.jsx("div",{className:`h-3 ${s?"bg-gray-700":"bg-gray-200"} rounded w-16`})]})},t))}),re=()=>{const t=te();return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4 mb-6`,children:[e.jsx("h3",{className:`text-sm font-medium mb-3 ${s?"text-white":"text-gray-900"}`,children:"Activity Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${s?"text-blue-400":"text-blue-600"}`,children:t.total}),e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Total Activities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${s?"text-green-400":"text-green-600"}`,children:t.byCategory.goals}),e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Goals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${s?"text-purple-400":"text-purple-600"}`,children:t.byCategory.learning}),e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Learning"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${s?"text-yellow-400":"text-yellow-600"}`,children:t.byCategory.achievements}),e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Achievements"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Engagement Level:"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-green-500",children:["High: ",t.engagementLevel.high]}),e.jsxs("span",{className:"text-yellow-500",children:["Medium: ",t.engagementLevel.medium]}),e.jsxs("span",{className:"text-gray-500",children:["Low: ",t.engagementLevel.low]})]})]})})]})},ae=()=>e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4 mb-4`,children:[e.jsx("h3",{className:`text-sm font-medium mb-3 ${s?"text-white":"text-gray-900"}`,children:"Sort & Filter Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium ${s?"text-gray-300":"text-gray-700"} mb-2 block`,children:"Sort by"}),e.jsxs("select",{value:T,onChange:t=>W(t.target.value),className:`w-full text-sm px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"type",children:"Activity Type"}),e.jsx("option",{value:"engagement",children:"Engagement Level"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium ${s?"text-gray-300":"text-gray-700"} mb-2 block`,children:"Order"}),e.jsxs("button",{onClick:()=>$(d==="asc"?"desc":"asc"),className:`w-full flex items-center justify-center px-3 py-2 text-sm rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":"bg-white border-gray-300 text-gray-900 hover:bg-gray-50"} transition-colors`,children:[d==="asc"?e.jsx(K,{className:"w-4 h-4 mr-2"}):e.jsx(U,{className:"w-4 h-4 mr-2"}),d==="asc"?"Ascending":"Descending"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium ${s?"text-gray-300":"text-gray-700"} mb-2 block`,children:"Time Period"}),e.jsxs("select",{value:b,onChange:t=>R(t.target.value),className:`w-full text-sm px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"})]})]})]})]}),le=()=>{const t=Object.values(l),r=[{label:"Goals",types:t.filter(n=>n.includes("GOAL"))},{label:"Skills & Learning",types:t.filter(n=>n.includes("SKILL")||n.includes("LEARNING"))},{label:"Events",types:t.filter(n=>n.includes("EVENT"))},{label:"Social",types:t.filter(n=>n.includes("GROUP")||n.includes("FEEDBACK")||n.includes("CONNECTION"))},{label:"Achievements",types:t.filter(n=>n.includes("ACHIEVEMENT")||n.includes("CERTIFICATION"))}];return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4 mb-4`,children:[e.jsx("h3",{className:`text-sm font-medium mb-3 ${s?"text-white":"text-gray-900"}`,children:"Filter by Activity Type"}),e.jsx("div",{className:"space-y-3",children:r.map(n=>e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium ${s?"text-gray-300":"text-gray-700"} mb-1 block`,children:n.label}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.types.map(i=>e.jsx("button",{onClick:()=>{const c=u.types||[],x=c.includes(i)?c.filter(j=>j!==i):[...c,i];I(j=>({...j,types:x.length>0?x:void 0}))},className:`text-xs px-2 py-1 rounded-full transition-colors ${u.types?.includes(i)?"bg-blue-600 text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.replace(/_/g," ").toLowerCase().replace(/\b\w/g,c=>c.toUpperCase())},i))})]},n.label))}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{onClick:()=>I({}),className:`text-xs px-3 py-1 rounded-lg ${s?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"} transition-colors`,children:"Clear All"}),e.jsx("button",{onClick:()=>O(!1),className:"text-xs px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Apply Filters"})]})]})};return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-gray-50"} transition-colors`,children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>N(-1),className:`p-2 rounded-lg ${s?"hover:bg-gray-800":"hover:bg-gray-100"} transition-colors`,children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Recent Activities"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Track your progress and engagement across the platform"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:b,onChange:t=>R(t.target.value),className:`text-sm px-3 py-2 rounded-lg border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsx("button",{onClick:()=>$(d==="asc"?"desc":"asc"),className:`p-2 rounded-lg ${s?"text-gray-400 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"} transition-colors`,title:`Sort ${d==="asc"?"Descending":"Ascending"}`,children:d==="asc"?e.jsx(K,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:()=>O(!A),className:`flex items-center px-4 py-2 text-sm font-medium ${s?"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20":"text-blue-600 hover:text-blue-800 hover:bg-blue-50"} rounded-lg transition-colors`,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),A?"Hide Filters":"Show Filters"]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("input",{type:"text",placeholder:"Search activities...",value:p,onChange:t=>Y(t.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg border ${s?"bg-gray-800 border-gray-700 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors`})]})}),A&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsx(le,{})]}),!S&&m.length>0&&e.jsx(re,{}),S?e.jsx(se,{}):e.jsxs("div",{className:"space-y-4",children:[m.map(t=>e.jsx("div",{className:`border ${s?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} rounded-lg p-4 hover:shadow-md transition-all duration-200`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${s?"bg-gray-700":"bg-gray-100"} rounded-full flex items-center justify-center`,children:e.jsx(be,{type:t.type,className:`w-5 h-5 ${ee(t.type)}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"} mb-1`,children:t.title}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-2`,children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("span",{className:`${s?"text-gray-500":"text-gray-400"} flex items-center`,children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),Z(t.timestamp)]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:t.type.replace(/_/g," ").toLowerCase().replace(/\b\w/g,r=>r.toUpperCase())}),t.userRole&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.userRole==="mentor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.userRole})]})]}),e.jsx(he,{size:"md",align:"right",actions:[{icon:xe,label:"View Details",onClick:()=>z(t)},{icon:ge,label:"Delete",onClick:()=>Q(t),variant:"danger"}]})]})})]})},t.id)),m.length===0&&e.jsxs("div",{className:`text-center py-12 ${s?"text-gray-400":"text-gray-500"}`,children:[e.jsx(H,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activities found"}),e.jsx("p",{className:"text-sm",children:p||u.types?.length?"Try adjusting your search or filters":"Start engaging with the platform to see your activities here"})]})]}),k&&_&&e.jsx(me,{isOpen:k,onClose:()=>{M(!1),F(null)},data:_,type:"event"}),G&&y&&e.jsx(ue,{isOpen:G,title:"Delete Activity",message:`Are you sure you want to delete "${y.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:X,onClose:()=>{D(!1),C(null)},variant:"danger"})]})})};export{Ie as default};
