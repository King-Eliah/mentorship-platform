import{c as k,u as Z,a7 as Q,r as l,j as e,v as i,X as D,s as m,w as x,a8 as T,t as g,I as d,U as z,R as W,T as E,C as F,K as _,f as ee,z as c}from"./index-wzYYnU-P.js";import{F as ae}from"./FileUpload-BerulG5y.js";import{C as se}from"./ConfirmationDialog-B30jwkFp.js";import{S as te}from"./save-ViXkPC0O.js";import{A as re}from"./award-Bky5W3bt.js";import{P}from"./plus-_tGHlXwb.js";import"./upload-CaDnr2vV.js";import"./image-BzKpCUV3.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=k("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=k("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=k("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),ye=()=>{const{user:s}=Z(),{goals:v,addGoal:I,deleteGoal:U,toggleGoalStatus:L}=Q(),[n,f]=l.useState(!1),[M,w]=l.useState(!1),[u,y]=l.useState(!1),[O,j]=l.useState(!1),[C,$]=l.useState(null),[p,N]=l.useState({isOpen:!1,goalId:null,goalTitle:""}),[r,S]=l.useState({title:"",description:"",deadline:""}),[t,A]=l.useState({firstName:s?.firstName||"",lastName:s?.lastName||"",email:s?.email||"",bio:s?.bio||"",skills:s?.skills||"",experience:s?.experience||""}),o=a=>{A(h=>({...h,[a.target.name]:a.target.value}))},b=a=>{S(h=>({...h,[a.target.name]:a.target.value}))},q=a=>{$(a),j(!1),c.success("Avatar uploaded successfully!")},B=a=>{c.error(`Avatar upload failed: ${a}`)},R=async()=>{w(!0);try{const a={firstName:t.firstName,lastName:t.lastName,bio:t.bio,skills:t.skills,experience:t.experience};await ee.updateUser(s?.id||"",a),c.success("Profile updated successfully!"),f(!1)}catch{c.error("Failed to update profile. Please try again.")}finally{w(!1)}},V=()=>{A({firstName:s?.firstName||"",lastName:s?.lastName||"",email:s?.email||"",bio:s?.bio||"",skills:s?.skills||"",experience:s?.experience||""}),f(!1)},H=a=>{if(a.preventDefault(),!r.title.trim()||!r.description.trim()||!r.deadline){c.error("Please fill in all fields");return}I({title:r.title,description:r.description,deadline:r.deadline,status:"pending"}),S({title:"",description:"",deadline:""}),y(!1),c.success("Goal created successfully!")},J=(a,h)=>{N({isOpen:!0,goalId:a,goalTitle:h})},K=()=>{p.goalId&&(U(p.goalId),c.success("Goal deleted successfully!"),N({isOpen:!1,goalId:null,goalTitle:""}))},X=()=>{N({isOpen:!1,goalId:null,goalTitle:""})},Y=a=>{L(a)},G=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return s?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Profile"}),n?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{onClick:R,loading:M,size:"sm",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(i,{onClick:V,variant:"secondary",size:"sm",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):e.jsxs(i,{onClick:()=>f(!0),size:"sm",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(m,{children:e.jsxs(x,{className:"text-center p-6",children:[e.jsxs("div",{className:"relative group mb-4",children:[C?e.jsx("img",{src:C,alt:"Profile Avatar",className:"w-24 h-24 rounded-full mx-auto object-cover"}):e.jsxs("div",{className:"w-24 h-24 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto",children:[s.firstName.charAt(0),s.lastName.charAt(0)]}),n&&e.jsx("button",{onClick:()=>j(!0),className:"absolute inset-0 w-24 h-24 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity mx-auto",children:e.jsx(ie,{className:"w-6 h-6"})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Upload Avatar"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsx(ae,{onFileUpload:q,onError:B,acceptedTypes:["image/*"],maxSize:5,multiple:!1,showPreview:!0})]})}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:s.role}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),s.email]}),e.jsx("div",{className:`mt-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:s.isActive?"Active":"Inactive"})]})})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsx(g,{children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Basic Information"})}),e.jsx(x,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{name:"firstName",label:"First Name",value:t.firstName,onChange:o,icon:e.jsx(z,{className:"w-4 h-4"})}),e.jsx(d,{name:"lastName",label:"Last Name",value:t.lastName,onChange:o,icon:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsx(d,{name:"email",label:"Email Address",type:"email",value:t.email,onChange:o,icon:e.jsx(T,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.lastName})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.email})]})]})})]}),e.jsxs(m,{children:[e.jsx(g,{children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"About Me"})}),e.jsx(x,{children:n?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),e.jsx("textarea",{name:"bio",rows:4,value:t.bio,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-primary-400 dark:focus:border-primary-400",placeholder:"Tell us about yourself..."})]}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.bio||"No bio provided yet."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),"Skills"]})}),e.jsx(x,{children:n?e.jsx(d,{name:"skills",label:"Skills",value:t.skills,onChange:o,placeholder:"e.g., JavaScript, React, Node.js"}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.skills||"No skills listed yet."})})]}),e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),"Experience"]})}),e.jsx(x,{children:n?e.jsx(d,{name:"experience",label:"Experience",value:t.experience,onChange:o,placeholder:"e.g., 3+ years in web development"}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.experience||"No experience listed yet."})})]})]})]})]}),s.role===W.MENTEE&&e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"My Goals"]}),e.jsxs(i,{onClick:()=>y(!u),size:"sm",variant:u?"secondary":"primary",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),u?"Cancel":"Add Goal"]})]})}),e.jsxs(x,{className:"space-y-6",children:[u&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Create New Goal"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsx(d,{name:"title",label:"Goal Title",value:r.title,onChange:b,placeholder:"e.g., Learn React Native",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",rows:3,value:r.description,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-primary-400 dark:focus:border-primary-400",placeholder:"Describe your goal and how you plan to achieve it...",required:!0})]}),e.jsx(d,{name:"deadline",label:"Deadline",type:"date",value:r.deadline,onChange:b,icon:e.jsx(F,{className:"w-4 h-4"}),required:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{type:"submit",size:"sm",children:"Create Goal"}),e.jsx(i,{type:"button",variant:"secondary",size:"sm",onClick:()=>y(!1),children:"Cancel"})]})]})]}),v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No goals yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Set your first goal to start tracking your progress"}),e.jsxs(i,{onClick:()=>y(!0),size:"sm",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Create Your First Goal"]})]}):e.jsx("div",{className:"space-y-4",children:v.map(a=>e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${a.status==="completed"?"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/20":"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:a.status==="completed",onChange:()=>Y(a.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("h5",{className:`font-medium ${a.status==="completed"?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:a.title})]}),e.jsx("p",{className:`text-sm mb-3 ${a.status==="completed"?"text-gray-400 dark:text-gray-500":"text-gray-600 dark:text-gray-300"}`,children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Deadline: ",G(a.deadline)]}),e.jsxs("div",{children:["Created: ",G(a.createdAt)]})]})]}),e.jsx(i,{onClick:()=>J(a.id,a.title),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(_,{className:"w-4 h-4"})})]})},a.id))})]})]}),e.jsx(se,{isOpen:p.isOpen,title:"Delete Goal",message:`Are you sure you want to delete the goal "${p.goalTitle}"? This action cannot be undone.`,onConfirm:K,onCancel:X,confirmText:"Delete Goal",cancelText:"Cancel",confirmVariant:"danger"})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})};export{ye as Profile};
