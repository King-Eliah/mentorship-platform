import{f as k,L as Q,y as L,r as u,R as x,j as e,p as C,v as t,s as g,S as $,N as n,n as S,g as G,O as K,b as E,H as W,P as M,Q as X,l as Y,z as h}from"./index-C3bYRuX8.js";import{u as Z}from"./useAuth-DVXHBEW0.js";import{D as ee}from"./DropdownSelect-CNY5rweM.js";import{P as I}from"./plus-BFsSpJWr.js";import{S as q}from"./send-BK_AWI2o.js";import{S as p}from"./star-CgkdF8Sa.js";import{F as se}from"./filter-CpljqbQJ.js";import{U as ae}from"./user-check-CYtRcOFm.js";const j={async getGroups(a){return k.getGroups()},async createGroup(a){return k.createGroup(a)},async joinGroup(a){return await new Promise(r=>setTimeout(r,500)),{success:!0}}};function te(a={}){return Q((r,c)=>j.getGroups({...a,page:r,size:c}),{loadingInitial:!0})}function re(){return L(a=>j.joinGroup(a))}function le(){return L(a=>j.leaveGroup(a))}function ge(){const{user:a}=Z(),[r,c]=u.useState({search:"",status:"all",sortBy:"groupName"}),[R,d]=u.useState(!1),[b,N]=u.useState("group_change"),y=a?.role===x.ADMIN,A=a?.role===x.MENTEE,T=a?.role===x.MENTOR,{items:i,loading:o,error:f,refresh:m,loadPage:P,hasMore:D}=te(r),{mutate:V,loading:v}=re(),{mutate:z,loading:w}=le(),_=async s=>{try{await V(s),h.success("Successfully joined group!"),m()}catch{}},F=async s=>{if(window.confirm("Are you sure you want to leave this group?"))try{await z(s),h.success("Successfully left group."),m()}catch{}},O=s=>s.members?.some(l=>l.id===a?.id),U=s=>{switch(s){case n.ACTIVE:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case n.INACTIVE:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case n.COMPLETED:return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},J=s=>{switch(s){case n.ACTIVE:return e.jsx(S,{className:"h-4 w-4 text-green-500"});case n.INACTIVE:return e.jsx(G,{className:"h-4 w-4 text-gray-500"});case n.COMPLETED:return e.jsx(p,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(C,{className:"h-4 w-4 text-gray-500"})}},B=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o&&i.length===0?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"},s))})]})}):f?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(C,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Failed to Load Groups"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f.message}),e.jsx(t,{onClick:m,children:"Retry"})]}):e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"Mentorship Groups"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:a?.role===x.ADMIN?"Create and manage all mentorship groups in your organization":"View mentorship groups and request changes"})]}),e.jsxs("div",{className:"flex gap-3",children:[y&&e.jsxs(t,{className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Create Group"]}),A&&e.jsxs(t,{variant:"outline",onClick:()=>{N("group_change"),d(!0)},className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Request Group Change"]}),T&&e.jsxs(t,{variant:"outline",onClick:()=>{N("mentee_change"),d(!0)},className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Request Mentee Change"]})]})]}),e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search groups, mentors, or skills...",value:r.search,onChange:s=>c(l=>({...l,search:s.target.value})),className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),e.jsx(ee,{placeholder:"Filter by status",value:r.status,onChange:s=>c(l=>({...l,status:s})),options:[{value:"all",label:"All Status",icon:e.jsx(p,{className:"w-4 h-4"}),description:"Show all groups"},{value:n.ACTIVE,label:"Active",icon:e.jsx(S,{className:"w-4 h-4"}),description:"Currently active groups"},{value:n.INACTIVE,label:"Inactive",icon:e.jsx(G,{className:"w-4 h-4"}),description:"Inactive groups"},{value:n.COMPLETED,label:"Completed",icon:e.jsx(p,{className:"w-4 h-4"}),description:"Completed groups"}]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," groups found"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs(g,{className:"overflow-hidden hover:shadow-lg transition-shadow flex flex-col",children:[e.jsxs("div",{className:"p-6 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[J(s.status||"active"),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(s.status||"active")}`,children:s.status||"active"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("div",{className:"text-sm font-medium",children:B(s.createdAt)})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:s.description}),s.mentor&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Mentor"})]}),e.jsxs("div",{className:"ml-6",children:[e.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:s.mentorName}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:e.jsx(K,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Mentees"})]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.members?.length||0," members"]})]})}),s.sharedSkills&&s.sharedSkills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Shared Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.sharedSkills.slice(0,3).map((l,H)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 px-2 py-1 rounded text-xs font-medium",children:l},H)),s.sharedSkills.length>3&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 px-2 py-1",children:["+",s.sharedSkills.length-3," more"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 p-4 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs(t,{size:"sm",variant:"ghost",className:"flex-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"View"]}),O(s)?e.jsxs(t,{size:"sm",variant:"ghost",onClick:()=>F(s.id),disabled:w,className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:[w?e.jsx(M,{className:"h-3 w-3 animate-spin"}):e.jsx(X,{className:"h-3 w-3 mr-1"}),"Leave"]}):e.jsxs(t,{size:"sm",variant:"ghost",onClick:()=>_(s.id),disabled:v,className:"flex-1 text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20",children:[v?e.jsx(M,{className:"h-3 w-3 animate-spin"}):e.jsx(Y,{className:"h-3 w-3 mr-1"}),"Join"]})]})]},s.id))}),D&&e.jsx("div",{className:"text-center mt-6",children:e.jsx(t,{onClick:()=>P(i.length/20),disabled:o,children:o?"Loading...":"Load More"})}),i.length===0&&!o&&e.jsx(g,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No groups found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:r.search||r.status!=="all"?"Try adjusting your search filters":"Get started by creating your first mentorship group"}),y&&e.jsxs(t,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Create First Group"]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:b==="group_change"?"Request Group Change":"Request Mentee Change"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:b==="group_change"?"Submit a request to change your current group assignment.":"Submit a request to change your assigned mentee."}),e.jsx("textarea",{placeholder:"Please explain your request...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:4}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx(t,{onClick:()=>{h.success("Request submitted successfully!"),d(!1)},className:"flex-1",children:"Submit Request"}),e.jsx(t,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Cancel"})]})]})})]})}export{ge as default};
