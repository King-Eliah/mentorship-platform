import{u as A,r as s,j as e,s as k,t as v,w,I as C,g as I,a9 as E,v as O}from"./index-wzYYnU-P.js";import{D}from"./DropdownSelect-C4JxEsmL.js";import{L as F,C as T}from"./Skeleton-EoW6I4sE.js";import{S as x}from"./star-DTYT5l8r.js";const L=Array.from({length:6},(o,a)=>({id:`s-${a+1}`,mentorId:"user-1",menteeId:`user-${a+2}`,title:`Mentorship Session #${a+1}`,duration:45+a%3*15,notes:"Discussed progress and set goals for next week.",rating:4-a%2*.5,date:new Date(Date.now()-a*864e5).toISOString()})),q=()=>{const{user:o}=A(),[a,g]=s.useState(!0),[u,h]=s.useState(null),[p,i]=s.useState([]),[n,j]=s.useState(""),[d,y]=s.useState(60),[c,b]=s.useState(""),[r,f]=s.useState(""),[l,S]=s.useState(""),[$,N]=s.useState(!1);s.useEffect(()=>{(async()=>{g(!0),h(null);try{i(L)}catch{i(L),h("Showing fallback data (backend unavailable)")}finally{g(!1)}})()},[]);const M=async()=>{if(!(!n.trim()||!l)){N(!0);try{const m={...{mentorId:o?.id||"user-1",menteeId:l,title:n,duration:d,notes:c,rating:r===""?void 0:Number(r)},id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()};i(R=>[m,...R]),j(""),y(60),b(""),f(""),S("")}catch{const t={id:`tmp-${Date.now()}`,mentorId:o?.id||"user-1",menteeId:l,title:n,duration:d,notes:c,rating:r===""?void 0:Number(r),date:new Date().toISOString()};i(m=>[t,...m])}finally{N(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Session Logs"}),u&&e.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:u})]}),e.jsxs(k,{children:[e.jsxs(v,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Log a Session"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record details from a mentorship session"})]}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(C,{label:"Title",value:n,onChange:t=>j(t.target.value),placeholder:"e.g., Weekly Check-in"}),e.jsx(D,{label:"Duration",value:String(d),onChange:t=>y(Number(t)),placeholder:"Select duration",options:[30,45,60,90,120].map(t=>({value:String(t),label:`${t} minutes`,icon:e.jsx(I,{className:"w-4 h-4"}),description:`${t} minute session`}))}),e.jsx(C,{label:"Mentee ID",value:l,onChange:t=>S(t.target.value),placeholder:"user-123"}),e.jsx(D,{label:"Rating (optional)",value:r===""?"":String(r),onChange:t=>f(t?Number(t):""),placeholder:"Select rating",options:[{value:"",label:"No rating",icon:e.jsx(x,{className:"w-4 h-4"}),description:"Skip rating"},...[1,2,3,4,5].map(t=>({value:String(t),label:`${t} Stars`,icon:e.jsx(x,{className:"w-4 h-4"}),description:`${t} out of 5 stars`}))]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:c,onChange:t=>b(t.target.value),rows:4,placeholder:"What did you discuss? Any action items?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]})}),e.jsx(E,{className:"flex justify-end",children:e.jsx(O,{onClick:M,loading:$,disabled:!n.trim()||!l,children:"Save Log"})})]}),e.jsxs(k,{children:[e.jsx(v,{children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Sessions"})}),e.jsx(w,{className:"p-0",children:a?e.jsx("div",{className:"p-4",children:e.jsx(F,{items:3,itemComponent:T})}):p.length===0?e.jsx("div",{className:"p-6 text-gray-600 dark:text-gray-400",children:"No sessions yet."}):e.jsx("div",{className:"space-y-3 p-4",children:p.map(t=>e.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.title}),t.rating&&e.jsxs("span",{className:"flex items-center text-xs font-medium text-amber-600 dark:text-amber-400 flex-shrink-0",children:[e.jsx(x,{className:"w-3 h-3 mr-0.5"}),t.rating.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center flex-shrink-0",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),t.duration," min"]}),e.jsx("span",{className:"truncate",children:new Date(t.date).toLocaleString()}),e.jsxs("span",{className:"truncate",children:["Mentee: ",t.menteeId]})]}),t.notes&&e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-2 line-clamp-1",children:t.notes})]})})},t.id))})})]})]})};export{q as SessionLogs};
